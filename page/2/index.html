<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"123.57.173.58","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="What I have learned">
<meta property="og:type" content="website">
<meta property="og:title" content="Paradox&#39;s Blog">
<meta property="og:url" content="http://123.57.173.58/page/2/index.html">
<meta property="og:site_name" content="Paradox&#39;s Blog">
<meta property="og:description" content="What I have learned">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Paradox">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://123.57.173.58/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Paradox's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Paradox's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/07/2020-10-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/07/2020-10-7/" class="post-title-link" itemprop="url">2020-10-7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-07 21:24:52 / Modified: 21:27:46" itemprop="dateCreated datePublished" datetime="2020-10-07T21:24:52+08:00">2020-10-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/diary/" itemprop="url" rel="index"><span itemprop="name">diary</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="上午">上午</h4>
<ul>
<li>阅读TCP拥塞机制部分</li>
<li>微分几何</li>
</ul>
<h4 id="下午">下午</h4>
<ul>
<li><p>红黑树</p>
<p>想用代码实现来着但没搞成...</p></li>
</ul>
<h4 id="晚上">晚上</h4>
<ul>
<li>看了一下TCP的wireshark lab</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/06/2020-10-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/2020-10-6/" class="post-title-link" itemprop="url">2020-10-6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-06 22:44:09 / Modified: 22:48:17" itemprop="dateCreated datePublished" datetime="2020-10-06T22:44:09+08:00">2020-10-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/diary/" itemprop="url" rel="index"><span itemprop="name">diary</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="上午">上午</h4>
<ul>
<li><p>由了解RELRO为动力写了篇着重介绍PLT, GOT表以及动态加载机制的文章</p>
<p>CSAPP上啥都有, 就是我看的不仔细, CSAPP永远滴神</p></li>
</ul>
<h4 id="下午">下午</h4>
<ul>
<li>每日一题315.Count of Smaller Numbers After Self, 我用multiset写了个感觉是<code>O(nlog n)</code>的结果超时, discussion里有直接用BST写的都能超80% submissions… 吐槽他们选的测试集… 应该用自平衡树的啊...</li>
</ul>
<h4 id="晚上">晚上</h4>
<ul>
<li>Eu4, 英法战争一小输一大输丧失了陆权, 悲</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/06/315-Count-of-Smaller-Numbers-After-Self/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/315-Count-of-Smaller-Numbers-After-Self/" class="post-title-link" itemprop="url">315.Count of Smaller Numbers After Self</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-06 22:29:31 / Modified: 22:43:58" itemprop="dateCreated datePublished" datetime="2020-10-06T22:29:31+08:00">2020-10-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index"><span itemprop="name">leetcode</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/Binary-Index-Tree/" itemprop="url" rel="index"><span itemprop="name">Binary Index Tree</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="count-of-smaller-numbers-after-self">315.Count of Smaller Numbers After Self</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/count-of-smaller-numbers-after-self/description/">source link</a></p>
</blockquote>
<h5 id="description">Description</h5>
<p>You are given an integer array <em>nums</em> and you have to return a new <em>counts</em> array. The <em>counts</em> array has the property where <code>counts[i]</code> is the number of smaller elements to the right of <code>nums[i]</code>.</p>
<h5 id="signature">Signature</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">countSmaller</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span></span>;</span><br></pre></td></tr></table></figure>
<h5 id="analysis">Analysis</h5>
<p>In this problem I won’t give the solution because a simple binary search tree can pass all the test cases and beat more than 80% submissions… Later I will implement red-black tree or another self-balance tree.</p>
<p>To solve this problem, you just need to iterate all elements in <code>nums</code> in reverse order and maintain a orderly structure to let the current element insert in and get its index info.</p>
<p>So the self-balance tree is the perfect choice, it allows insert in <code>O(log n)</code> time and can get the specific index while do insert.</p>
<h5 id="solution">Solution</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/06/%E7%AE%80%E4%BB%8Blinux%E4%B8%8Bexecutable%E7%9A%84%E5%87%A0%E7%A7%8D%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/%E7%AE%80%E4%BB%8Blinux%E4%B8%8Bexecutable%E7%9A%84%E5%87%A0%E7%A7%8D%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/" class="post-title-link" itemprop="url">简介linux下executable的几种保护机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-06 09:06:23 / Modified: 15:08:07" itemprop="dateCreated datePublished" datetime="2020-10-06T09:06:23+08:00">2020-10-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ctf/" itemprop="url" rel="index"><span itemprop="name">ctf</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ctf/pwn/" itemprop="url" rel="index"><span itemprop="name">pwn</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="简介linux下executable的几种保护机制">简介linux下executable的几种保护机制</h3>
<p>本文是我在了解RELRO时感觉我对.plt和.got了解太少了, 于是补全下我对elf链接机制的空白.</p>
<p>如题, 首先来介绍几种常见的anti-exploit机制:</p>
<ul>
<li><p>NX保护</p>
<p>开启了NX保护后栈区不可执行, 读写执行权限由页表给出, 早期由于硬件的问题, 权限只能分为read-only和writeable&amp;executable, 但近年随着硬件支持, executable可作为单独的权限给出(page table中的NX位)</p></li>
<li><p>canary</p>
<p>这个选项在gcc中默认开启, 会在返回地址和saved register下创建一个canary值, 在函数ret之前会检查该值, 若发现被改变则会直接跳转至<code>__stack_chk_fail</code> 从而防止栈溢出攻击</p>
<p>常用的规避方式有</p>
<ul>
<li>泄漏canary值进行二次注入</li>
<li>劫持<code>__stack_chk_fail</code></li>
</ul></li>
<li><p>ASLR</p>
<ul>
<li>.so文件会被加载到随机地址</li>
<li>ld时如果有-pie option, .text段的加载地址也会被随机化</li>
<li>stack, heap地址随机化</li>
</ul></li>
<li><p>RELRO(relocation read-only)</p>
<p>需要先介绍elf的.got, .plt段</p></li>
</ul>
<h5 id="got-.plt">.got &amp; .plt</h5>
<p>As we already know, the elf include main symbol after linking does not include everything! For example, if you use <code>printf</code> in your program, the binary for <code>printf</code> doesn’t in your elf such like text segment even you have done link. So your program still need <code>shared library</code> at load time or runtime. The GOT&amp;PLT segment are the keys to code&amp;use dynamic or shared library.</p>
<p>PLT stands for Procedure Linkage Table, it is used to called the extern function whose address isn’t know at linking time, such as the dynamic shared library. The entry in plt is left to be resolved by dynamic linker at run time.</p>
<p>GOT stands for Global Offsets Table, as its name, every entry in GOT represents a offset because there is a fact that the distance between data segment and code segment is fixed. After dynamic linking entries in GOT are relocated to absolute address.</p>
<p>PIC(Position-Independent Code) can be implemented by a interesting mechanism called lazy binding: delay the bind of absolute address of shared library’s symbols to the first reference occured.</p>
<p>(切成中文) GOT表中第0项是.dynamic的地址, 第一项是reloc entry的地址, 这两项是动态链接器解析地址时会用到的信息, 第2项是动态链接器的入口</p>
<p>PLT表中第0项调用动态链接器, 第一项是系统启动函数<code>__libc_start_main</code>, 执行初始化环境</p>
<p>这种机制使得在.text段中调用的函数只是一个壳子, 在第一次调用时:</p>
<ol type="1">
<li>对函数的调用会跳转到PLT表中对应的条目, 第一条指令会把该函数ID压入栈中</li>
<li>这个条目跳转到对应GOT表条目</li>
<li>此时GOT表条目简单的指向PLT中对应条目的第二条指令</li>
<li>继续执行跳转到PLT[0]</li>
<li>把GOT[1]压入栈中, 跳转到GOT[2]进入动态链接器</li>
<li>动态链接器重写GOT对应条目并交换控制给调用函数</li>
</ol>
<p>之后调用就只是简单的跳转到PLT再到GOT调用目标函数了</p>
<h5 id="relro">RELRO!!!</h5>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -g -O0 -Wl,-z,relro,-z,now -o &lt;binary_name&gt; &lt;source_code&gt;</span><br></pre></td></tr></table></figure>
<p>RELRO分为partial RELRO和full RELRO</p>
<ul>
<li><p>partial RELRO</p>
<p>It’s also possible to compile with partial RELRO, which can be achieved by using the "-<code>z,relro</code>" option and not the "<code>-z,now</code>" on the gcc command line.</p>
<p>In partial RELRO, the non-PLT part of the GOT section (.got from readelf output) is read only but .got.plt is still writeable.</p></li>
<li><p>full RELRO</p>
<p>In complete RELRO, the entire GOT (.got and .got.plt both) is marked as read-only.</p>
<p>使用了-z,now option使得所有PLT指向的GOT项在加载开始时全部重定向完毕再把整个GOT表权限改为read-only</p></li>
</ul>
<p>所以其实partial RELRO没啥用, 仍然可以通过改GOT表的方式劫持程序, 进行getshell之类的操作</p>
<h5 id="reference">Reference</h5>
<ul>
<li><p>CSAPP</p></li>
<li><p>《ctf特训营》— FlappyPig</p></li>
<li><p>https://en.wikipedia.org/wiki/Global_Offset_Table</p></li>
<li><p>https://reverseengineering.stackexchange.com/questions/1992/what-is-plt-got</p></li>
<li><p>https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html</p></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/06/2020-10-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/2020-10-5/" class="post-title-link" itemprop="url">2020-10-5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-06 08:32:30 / Modified: 08:49:06" itemprop="dateCreated datePublished" datetime="2020-10-06T08:32:30+08:00">2020-10-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/diary/" itemprop="url" rel="index"><span itemprop="name">diary</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="上午下午">上午&amp;下午</h4>
<ul>
<li><p>看10.4晚上那道算法题<code>218.The Skyline Problem</code></p>
<ul>
<li>“扫线法”</li>
<li>c++ 中的 priority_queue 和 multiset 结构, multiset内部实现可用红黑树</li>
</ul></li>
</ul>
<h4 id="晚上">晚上</h4>
<ul>
<li><p>每日一题307.Range Sum Query - Mutable</p>
<p>这道题是用的我没听说的数据结构 — Binary Index Tree, 利用这个结构, 可以在<code>O(n)</code>时间内完成构造, <code>O(log n)</code>时间内完成查询前缀和和更新操作</p></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/05/307-Range-Sum-Query-Mutable/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/05/307-Range-Sum-Query-Mutable/" class="post-title-link" itemprop="url">307.Range Sum Query - Mutable</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-10-05 20:58:15" itemprop="dateCreated datePublished" datetime="2020-10-05T20:58:15+08:00">2020-10-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-06 08:51:50" itemprop="dateModified" datetime="2020-10-06T08:51:50+08:00">2020-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index"><span itemprop="name">leetcode</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/Binary-Index-Tree/" itemprop="url" rel="index"><span itemprop="name">Binary Index Tree</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="range-sum-query---mutable">307.Range Sum Query - Mutable</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/range-sum-query-mutable/description/">source link</a></p>
</blockquote>
<h5 id="description">Description</h5>
<p>Given an integer array <em>nums</em>, find the sum of the elements between indices <em>i</em> and <em>j</em> (<em>i</em> ≤ <em>j</em>), inclusive.</p>
<p>The <em>update(i, val)</em> function modifies <em>nums</em> by updating the element at index <em>i</em> to <em>val</em>.</p>
<h5 id="signature">Signature</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="analysis">Analysis</h5>
<p>This problem is all about <code>Binary Index Tree</code>. So I will introduce the <code>Binary Index Tree</code> here:</p>
<ol type="1">
<li><p>What is Binary Index Tree?</p>
<p>First define macro <code>lsb</code> return the least significant bit of given parameter.</p>
<p>Given a array called <code>nums</code>, we construct a new array <code>bit</code> which length equal to <code>nums</code>, <code>bit[i]</code> indicates the sum of <code>nums[i-lsb(i)+1:i+1]</code>. The <code>bit</code> means Binary Index Tree.</p></li>
<li><p>Why Binary Index Tree?</p>
<p>As you see in this problem, BIT provides <code>O(log n)</code> time complexity for get sum of range in <code>nums</code> and every time you update the <code>nums</code>. So when you want to query range sum for a mutable array, BIT is one of the best choice!</p></li>
</ol>
<h5 id="solution">Solution</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span> &#123;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lsb(n) (n &amp; (-n))  <span class="comment">// least significant bit</span></span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums;</span><br><span class="line">    <span class="comment">// bit[i] indicates sum of nums[i-lsb(i)+1:i+1]</span></span><br><span class="line">    <span class="keyword">int</span>* bit;  <span class="comment">// binary index tree</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NumArray(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;nums = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(nums.begin(), nums.end());</span><br><span class="line">            bit = (<span class="keyword">int</span>*)<span class="built_in">calloc</span>(nums.size(), <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">            bit[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i - lsb(i) + <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                    bit[i] += nums[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> delta = val - nums[i];</span><br><span class="line">        nums[i] = val;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; nums.size()) &#123;</span><br><span class="line">                bit[i] += delta;</span><br><span class="line">                i += lsb(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            bit[<span class="number">0</span>] = val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumRange</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;</span><br><span class="line">                sum += bit[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sum += bit[j];</span><br><span class="line">            j -= lsb(j);</span><br><span class="line">        &#125;</span><br><span class="line">        i--;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                    sum -= bit[<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sum -= bit[i];</span><br><span class="line">                i -= lsb(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/05/218-The-Skyline-Problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/05/218-The-Skyline-Problem/" class="post-title-link" itemprop="url">218.The Skyline Problem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-10-05 17:04:30" itemprop="dateCreated datePublished" datetime="2020-10-05T17:04:30+08:00">2020-10-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-06 08:52:03" itemprop="dateModified" datetime="2020-10-06T08:52:03+08:00">2020-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index"><span itemprop="name">leetcode</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/Binary-Index-Tree/" itemprop="url" rel="index"><span itemprop="name">Binary Index Tree</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="the-skyline-problem">218.The Skyline Problem</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/the-skyline-problem/description/">source link</a></p>
</blockquote>
<h5 id="description">Description</h5>
<p>A city's skyline is the outer contour of the silhouette formed by all the buildings in that city when viewed from a distance. Now suppose you are <strong>given the locations and height of all the buildings</strong> as shown on a cityscape photo (Figure A), write a program to <strong>output the skyline</strong> formed by these buildings collectively (Figure B).</p>
<p><img src="https://assets.leetcode.com/uploads/2018/10/22/skyline1.png" width="40%"></p>
<p><img src="https://assets.leetcode.com/uploads/2018/10/22/skyline2.png" width="40%"></p>
<p>The geometric information of each building is represented by a triplet of integers <code>[Li, Ri, Hi]</code>, where <code>Li</code> and <code>Ri</code> are the x coordinates of the left and right edge of the ith building, respectively, and <code>Hi</code> is its height. It is guaranteed that <code>0 ≤ Li, Ri ≤ INT_MAX</code>, <code>0 &lt; Hi ≤ INT_MAX</code>, and <code>Ri - Li &gt; 0</code>. You may assume all buildings are perfect rectangles grounded on an absolutely flat surface at height 0.</p>
<p>For instance, the dimensions of all buildings in Figure A are recorded as: <code>[ [2 9 10], [3 7 15], [5 12 12], [15 20 10], [19 24 8] ]</code>.</p>
<p>The output is a list of "<strong>key points</strong>" (red dots in Figure B) in the format of <code>[ [x1,y1], [x2, y2], [x3, y3], ... ]</code> that uniquely defines a skyline. <strong>A key point is the left endpoint of a horizontal line segment</strong>. Note that the last key point, where the rightmost building ends, is merely used to mark the termination of the skyline, and always has zero height. Also, the ground in between any two adjacent buildings should be considered part of the skyline contour.</p>
<p>For instance, the skyline in Figure B should be represented as:<code>[ [2 10], [3 15], [7 12], [12 0], [15 10], [20 8], [24, 0] ]</code>.</p>
<p><strong>Notes:</strong></p>
<ul>
<li>The number of buildings in any input list is guaranteed to be in the range <code>[0, 10000]</code>.</li>
<li>The input list is already sorted in ascending order by the left x position <code>Li</code>.</li>
<li>The output list must be sorted by the x position.</li>
<li>There must be no consecutive horizontal lines of equal height in the output skyline. For instance, <code>[...[2 3], [4 5], [7 5], [11 5], [12 7]...]</code> is not acceptable; the three lines of height 5 should be merged into one in the final output as such: <code>[...[2 3], [4 5], [12 7], ...]</code></li>
</ul>
<h5 id="signature">Signature</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">getSkyline</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; buildings)</span></span>;</span><br></pre></td></tr></table></figure>
<h5 id="analysis">Analysis</h5>
<p>First I need to introduce the <code>multiset</code> in c++:</p>
<ul>
<li><code>multiset</code> is a stl container that can be implemented in <code>red-black tree</code> — a kind of <code>self-balance tree</code></li>
<li><code>multiset</code> offers <code>O(log n)</code> time complexity insert, find, erase operations and some iterator api such as rbegin(Return the reverse iterator to reverse beginning), crbegin(Return const_reverse_iterator to reverse beginning)</li>
</ul>
<p>So now we have the powerful <code>multiset</code> to help us solve this problem. Below are the concrete procedures to solve that:</p>
<ol type="1">
<li>The data is about rectangle, so we need firstly convert the [l_coord, r_coord, h] triplet to [l_coord, h, LEFT], [r_coord, h, RIGHT], which indicates the begin and end of the rectangle.</li>
<li>Sort the array we obtain in the first step, notice that when two point coord are equal, we sort it in h descending order when these points are LEFT and h ascending order when these points are RIGHT. This step is necessary because we need guarantee the right edge is behind the left edge and avoid the incorrect change of max height.</li>
<li>Insert these points'h to multiset one-by-one, and monitors the max value in multiset, when it changes, we need to push the corresponding points to the result vector.</li>
</ol>
<h5 id="solution">Solution</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">getSkyline</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; buildings)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; r;</span><br><span class="line">    <span class="keyword">if</span> (buildings.size() &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="keyword">int</span> h;</span><br><span class="line">        <span class="keyword">bool</span> type;  <span class="comment">// 1 for left and 0 for right</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">vector</span>&lt;point&gt; <span class="built_in">array</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; buildings.size(); i++) &#123;</span><br><span class="line">        <span class="built_in">array</span>.push_back(&#123;buildings[i][<span class="number">0</span>], buildings[i][<span class="number">2</span>], <span class="number">1</span>&#125;);</span><br><span class="line">        <span class="built_in">array</span>.push_back(&#123;buildings[i][<span class="number">1</span>], buildings[i][<span class="number">2</span>], <span class="number">0</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(<span class="built_in">array</span>.begin(), <span class="built_in">array</span>.end(), [](point a, point b) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.x != b.x) &#123;</span><br><span class="line">            <span class="keyword">return</span> a.x &lt; b.x;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a.type &amp;&amp; b.type) &#123;</span><br><span class="line">            <span class="keyword">return</span> a.h &gt; b.h;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!a.type &amp;&amp; !b.type) &#123;</span><br><span class="line">            <span class="keyword">return</span> a.h &lt; b.h;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> a.type;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    q.push(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line">    v.push_back(<span class="number">0</span>);</span><br><span class="line">    v.push_back(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> prev = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">multiset</span>&lt;<span class="keyword">int</span>&gt; <span class="built_in">set</span>;</span><br><span class="line">    <span class="built_in">set</span>.insert(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; e : <span class="built_in">array</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.type) &#123;</span><br><span class="line">            <span class="built_in">set</span>.insert(e.h);</span><br><span class="line">            <span class="keyword">if</span> (prev != *<span class="built_in">set</span>.rbegin()) &#123;</span><br><span class="line">                v[<span class="number">0</span>] = e.x;</span><br><span class="line">                v[<span class="number">1</span>] = e.h;</span><br><span class="line">                r.push_back(v);</span><br><span class="line">                prev = *<span class="built_in">set</span>.rbegin();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">set</span>.erase(<span class="built_in">set</span>.find(e.h));</span><br><span class="line">            <span class="keyword">if</span> (prev != *<span class="built_in">set</span>.rbegin()) &#123;</span><br><span class="line">                v[<span class="number">0</span>] = e.x;</span><br><span class="line">                v[<span class="number">1</span>] = *<span class="built_in">set</span>.rbegin();</span><br><span class="line">                r.push_back(v);</span><br><span class="line">                prev = *<span class="built_in">set</span>.rbegin();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/02/51-N-Queens/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/02/51-N-Queens/" class="post-title-link" itemprop="url">51.N-Queens</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-02 15:39:43 / Modified: 16:04:18" itemprop="dateCreated datePublished" datetime="2020-10-02T15:39:43+08:00">2020-10-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index"><span itemprop="name">leetcode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="n-queens">51.N-Queens</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/n-queens/description/">source link</a></p>
</blockquote>
<h5 id="description">Description</h5>
<p>The <em>n</em>-queens puzzle is the problem of placing <em>n</em> queens on an <em>n</em>×<em>n</em> chessboard such that no two queens attack each other.</p>
<p>Given an integer <em>n</em>, return all distinct solutions to the <em>n</em>-queens puzzle.</p>
<p>Each solution contains a distinct board configuration of the <em>n</em>-queens' placement, where <code>'Q'</code> and <code>'.'</code> both indicate a queen and an empty space respectively.</p>
<h5 id="signature">Signature</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; <span class="title">solveNQueens</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br></pre></td></tr></table></figure>
<h5 id="analysis">Analysis</h5>
<p>Just a simple backtracking algorithm, but do some optimization:</p>
<ol type="1">
<li>The solutions' symmetric are also solution, so you can just add two solutions when you find one.
<ul>
<li>Notice that <code>n==1</code> is an exception.</li>
</ul></li>
<li>When the n is odd and there is a ‘Q’ locates at center of the solution’s fisrt line, you can’t add the symmetric one to avoid duplicate.</li>
</ol>
<h5 id="solution">Solution</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt;&amp; r, <span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; solu, <span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cur == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (n + <span class="number">1</span>) / <span class="number">2</span>; i++) &#123;</span><br><span class="line">            solu[cur][i] = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">            helper(r, n, solu, cur + <span class="number">1</span>);</span><br><span class="line">            solu[cur][i] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cur; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (solu[cur - j][i] == <span class="string">&#x27;Q&#x27;</span> || (i - j &gt;= <span class="number">0</span> &amp;&amp; solu[cur - j][i - j] == <span class="string">&#x27;Q&#x27;</span>) || (i + j &lt; n &amp;&amp; solu[cur - j][i + j] == <span class="string">&#x27;Q&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">goto</span> end;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            solu[cur][i] = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (cur == n - <span class="number">1</span>) &#123;</span><br><span class="line">                r.push_back(solu);</span><br><span class="line">                <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) != <span class="number">1</span> || solu[<span class="number">0</span>][n / <span class="number">2</span>] != <span class="string">&#x27;Q&#x27;</span>) &#123;</span><br><span class="line">                    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; another;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                        <span class="built_in">string</span> local = <span class="built_in">string</span>(solu[i]);</span><br><span class="line">                        reverse(local.begin(), local.end());</span><br><span class="line">                        another.push_back(local);</span><br><span class="line">                    &#125;</span><br><span class="line">                    r.push_back(another);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                helper(r, n, solu, cur + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            solu[cur][i] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        end:</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; <span class="title">solveNQueens</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; r;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; v;</span><br><span class="line">        v.push_back(<span class="built_in">string</span>(<span class="string">&quot;Q&quot;</span>));</span><br><span class="line">        r.push_back(v);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; solu;</span><br><span class="line">    <span class="built_in">string</span> s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    s.append(n, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        solu.push_back(s);</span><br><span class="line">    &#125;</span><br><span class="line">    helper(r, n, solu, <span class="number">0</span>);</span><br><span class="line">    sort(r.begin(), r.end());</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/02/47-Permutations-II/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/02/47-Permutations-II/" class="post-title-link" itemprop="url">47.Permutations II</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-02 10:48:34 / Modified: 10:50:58" itemprop="dateCreated datePublished" datetime="2020-10-02T10:48:34+08:00">2020-10-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index"><span itemprop="name">leetcode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="permutations-ii">47.Permutations II</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/permutations-ii/description/">source link</a></p>
</blockquote>
<h5 id="description">Description</h5>
<p>Given a collection of numbers that might contain duplicates, return all possible unique permutations.</p>
<h5 id="signature">Signature</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">permuteUnique</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span></span>;</span><br></pre></td></tr></table></figure>
<h5 id="analysis">Analysis</h5>
<p>Almost completely same as previous <code>46.Permutations</code>, simplely sort the <code>nums</code> before enter <code>helper</code> and in <code>helper</code> DFS loop add some code like <code>if (nums[i] == nums[i - 1]) continue;</code> to avoid duplicate.</p>
<h5 id="solution">Solution</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; r, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; path, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.size() == <span class="number">1</span>) &#123;</span><br><span class="line">        path.push_back(nums[<span class="number">0</span>]);</span><br><span class="line">        r.push_back(path);</span><br><span class="line">        path.pop_back();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; local;  <span class="comment">// n-1 length subarray of nums</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">        local.push_back(nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    path.push_back(nums[<span class="number">0</span>]);</span><br><span class="line">    helper(r, path, local);</span><br><span class="line">    path.pop_back();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] == nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        local[i - <span class="number">1</span>] = nums[i - <span class="number">1</span>];</span><br><span class="line">        path.push_back(nums[i]);</span><br><span class="line">        helper(r, path, local);</span><br><span class="line">        path.pop_back();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">permuteUnique</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    sort(nums.begin(), nums.end());</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; r;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path;</span><br><span class="line">    helper(r, path, nums);</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://123.57.173.58/2020/10/01/2020-10-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Paradox">
      <meta itemprop="description" content="What I have learned">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Paradox's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/01/2020-10-1/" class="post-title-link" itemprop="url">2020-10-1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-10-01 22:24:11 / Modified: 22:26:22" itemprop="dateCreated datePublished" datetime="2020-10-01T22:24:11+08:00">2020-10-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/diary/" itemprop="url" rel="index"><span itemprop="name">diary</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="上午">上午</h4>
<ul>
<li>把前天的那个leetcode 45. wildcard 用dp重写了一遍, 仍然是看了别人的write up才写出来的...</li>
<li>好好看了下昨天那个ret2libc的流程</li>
</ul>
<h4 id="下午">下午</h4>
<ul>
<li>恰饭睡觉~</li>
</ul>
<h4 id="晚上">晚上</h4>
<ul>
<li>力扣每日一题, 今天贼简单</li>
<li>通过一道题了解了下printf %n的漏洞, 但是关于偏移量还是有些疑惑</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Paradox</p>
  <div class="site-description" itemprop="description">What I have learned</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Paradox</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
